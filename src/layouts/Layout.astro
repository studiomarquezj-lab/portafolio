---
import "../styles/global.css";
import { ViewTransitions } from "astro:transitions";

interface Props {
    title: string;
    description?: string;
}

const {
    title,
    description = "Agencia de performance para negocios que quieren escalar. Ads que se pagan solos. Sistemas que venden mientras duermes.",
} = Astro.props;
---

<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title} | In Agencia</title>
        <meta name="description" content={description} />

        <!-- Stitch Fonts: Plus Jakarta Sans + Outfit + Playfair Display -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Plus+Jakarta+Sans:wght@200;300;400;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Material Symbols -->
        <link
            href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
            rel="stylesheet"
        />

        <ViewTransitions />
    </head>
    <body class="selection:bg-white selection:text-black">
        <!-- Grainy Overlay (Stitch texture) -->
        <div
            class="fixed inset-0 pointer-events-none z-50 opacity-[0.015] mix-blend-overlay"
            style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"
        >
        </div>

        <!-- Cursor Glow Effect -->
        <div
            class="fixed w-[800px] h-[800px] bg-white/5 rounded-full blur-[140px] pointer-events-none -z-10 transition-opacity duration-500 opacity-0 lg:opacity-100"
            id="cursor-glow"
        >
        </div>

        <slot />

        <script>
            // Scroll Reveal Logic
            const observerOptions = {
                root: null,
                threshold: 0.1,
                rootMargin: "0px 0px -50px 0px",
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("reveal-active");
                    }
                });
            }, observerOptions);

            document.addEventListener("astro:page-load", () => {
                const revealElements = document.querySelectorAll(".reveal");
                revealElements.forEach((el) => observer.observe(el));
            });

            // Cursor Glow Effect
            const glow = document.getElementById("cursor-glow");
            window.addEventListener("mousemove", (e) => {
                if (glow) {
                    const x = e.clientX - 400;
                    const y = e.clientY - 400;
                    glow.style.transform = `translate(${x}px, ${y}px)`;
                }
            });
        </script>
    </body>
</html>
